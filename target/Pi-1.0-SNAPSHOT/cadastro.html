<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Cadastro</title>
    <link rel="stylesheet" href="css/style.css">
    <script src="script.js"></script>
    <script>
        function setFormAction() {
            const urlParams = new URLSearchParams(window.location.search);
            const tipo = urlParams.get('tipo');
            
            const inputHidden = document.getElementById('tipoInput');
            if(inputHidden) inputHidden.value = tipo;
            
            const form = document.getElementById('formCadastro');
            
        }
        
        function processarCadastro(event) {
            event.preventDefault(); 

            if (!validarFormularioCadastro(event)) {
                return false; 
            }

            const tipo = document.getElementById('tipoInput').value;

            if (tipo === 'profissional') {
                window.location.href = 'detalhes_servico.html';
            } else {
                alert("Cadastro realizado com sucesso! Bem-vindo.");
                window.location.href = 'dashboard_cliente.html';
            }

            return true;
        }
    </script>
</head>
<body onload="setFormAction()">
    <div class="container">
        <a href="selecao_tipo.html" style="text-decoration: none; color: #666;">&larr; Voltar</a>
        <h2>Cadastro</h2>
        <p>Passo 2 de 3</p>
        
        <form id="formCadastro" name="formCadastro" method="POST" onsubmit="processarCadastro(event)"> 
            <input type="hidden" id="tipoInput" name="tipo">
            <div class="form-group">
                <label>Celular</label>
                <input type="text" name="celular" placeholder="(00) 00000-0000" oninput="mascaraCelular(this)" required>
            </div>

            <h3>Endereço</h3>
            <div class="form-group">
                <label>Logradouro (Rua/Av)</label>
                <input type="text" name="endereco" required>
            </div>

            <div class="form-group" style="display:flex; gap:10px;">
                <div style="flex:1">
                    <label>Número</label>
                    <input type="number" name="numero" required>
                </div>
                <div style="flex:1">
                    <label>UF</label>
                    <input type="text" name="uf" placeholder="SP" maxlength="2" required>
                </div>
            </div>

            <div class="form-group">
                <label>Complemento</label>
                <input type="text" name="complemento">
            </div>
            <div class="form-group">
                <label>Nome Completo</label>
                <input type="text" name="nome" required>
            </div>
            
            <div class="form-group">
                <label>CPF</label>
                <input type="text" name="cpf" placeholder="000.000.000-00" oninput="mascaraCPF(this)" required>
            </div>
            
            <div class="form-group">
                <label>RG</label>
                <input type="text" name="rg" required>
            </div>
            
            <div class="form-group">
                <label>Data de Nascimento</label>
                <input type="date" name="dataNasc" required>
            </div>
            
            <div class="form-group">
                <label>Email</label>
                <input type="email" name="email" required>
            </div>
            
            <div class="form-group">
                <label>Senha</label>
                <input type="password" name="senha" minlength="6" required>
            </div>
            
            <button type="submit" class="btn-primary">Continuar</button>
        </form>
    </div>
</body>
</html>